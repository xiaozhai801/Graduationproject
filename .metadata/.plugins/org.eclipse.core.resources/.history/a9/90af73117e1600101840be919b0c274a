<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Demo</title>
  <link href=".//layui/css/layui.css" rel="stylesheet">
  <script src=".//layui/layui.js"></script>
</head>
<body>
  <table class="layui-hide" id="ID-table-demo-editable"></table>
</body>
<script>
layui.use(['table', 'util'], function() {
  var table = layui.table;
  var util = layui.util;

  // 根据 editable 字段判断是否允许编辑
  var editable = function(d) {
    return d.editable ? 'text' : undefined;
  };

  // 渲染表格
  table.render({
    elem: '#ID-table-demo-editable',
    url: 'SelectAllUser',
    page: true,
    //editTrigger: 'dblclick', // 双击触发编辑
    cols: [[
      {checkbox: true, fixed: true},
      {field: 'userId', fixed: 'left', width:80, title: 'ID', sort: true},
      {field: 'name', width:100, title: '名称', edit: editable},
      {field: 'sex', width:80, title: '性别', edit: editable},
      {field: 'age', width:120, title: '年龄', sort: true, edit: editable},
      {field: 'email', title: '邮箱', width:300, edit: editable}
    ]],
    height: 'full-10'
  });

  // 监听复选框选中事件
  table.on('checkbox(ID-table-demo-editable)', function(obj) {
    var data = obj.data;
    data.editable = true; // 强制允许编辑
  });

  // 单元格编辑事件
  table.on('edit(ID-table-demo-editable)', function(obj) {
    var value = obj.value;
    if (value.replace(/\s/g, '') === '') {
      layer.tips('值不能为空', this, {tips: 1});
      return obj.reedit();
    }
    layer.msg('字段更新成功：' + util.escape(value));
  });
});
</script>
</html>