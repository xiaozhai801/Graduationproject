package com.zpq.filter;

import javax.servlet.*;
import javax.servlet.annotation.WebFilter;
import java.io.IOException;

@WebFilter("/*") // 这里设置拦截所有请求，可按需调整拦截路径
public class ErrorPageFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        // 初始化方法，可进行一些初始化操作，如获取配置参数等
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        try {
            chain.doFilter(request, response); // 放行请求，让其继续访问目标资源
        } catch (Exception e) {
            // 捕获异常，这里主要关注访问不存在页面时的404异常等
            HttpServletResponse httpResponse = (HttpServletResponse) response;
            if (httpResponse.getStatus() == 404) { 
                request.getRequestDispatcher("pages/Error/ErrorPage.html").forward(request, response); 
            }
        }
    }

    @Override
    public void destroy() {
        // 过滤器销毁时执行的方法，可进行资源释放等操作
    }
}