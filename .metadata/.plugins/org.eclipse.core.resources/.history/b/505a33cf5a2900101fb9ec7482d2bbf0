<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>我的收藏</title>
<link href="../../layui/css/layui.css" rel="stylesheet">
<script src="../../layui/layui.js"></script>
<script src="../../js/jquery-3.6.0.min.js"></script>
<style>
.layui-nav.layui-nav-tree {
	position: fixed;
	left: 0;
	top: 0;
	width: 200px;
	overflow-y: auto;
}

.layui-form {
	margin-left: 220px;
	padding: 20px;
}

#favorite-list {
	margin-top: 20px;
}

.layui-card {
	box-shadow: 0 2px 4px rgba(0, 0, 0, .1);
	border-radius: 4px;
}

.layui-card-header {
	border-bottom: 1px solid #f0f0f0;
	padding: 15px 20px;
}

.layui-card-body {
	padding: 20px;
	line-height: 1.6;
}

.layui-empty {
	text-align: center;
	color: #999;
	padding: 50px 0;
}
</style>
</head>

<body>
	<ul class="layui-nav layui-nav-tree">
		<li class="layui-nav-item"><a href="PersonalInfo.html">个人信息</a></li>
		<li class="layui-nav-item"><a href="EditPassword.html">修改密码</a></li>
		<li class="layui-nav-item"><a href="MyFavorite.html">我的收藏</a></li>
	</ul>
	<div id="favorite-list" class="layui-form"></div>

	<script>
    $(document).ready(function () {
        $.ajax({
            url: '../../SelectMyFavoriteServlet',
            method: 'GET',
            dataType: 'json',
            success: function (response) {
                var favoriteList = $('#favorite-list');
                favoriteList.empty();
                console.log(response.data[1]);
                if (response.length > 0) {
                    response.forEach(function (item.data) {
                        // 创建卡片容器
                        var card = $('<div class="layui-card" style="margin-bottom: 20px;"></div>');
                        
                        // 卡片头部（标题和作者信息）
                        var cardHeader = $(`
                            <div class="layui-card-header">
                                <h2 style="font-size: 20px; margin-bottom: 5px;">${item.topic}</h2>
                                <div style="color: #666; font-size: 12px;">
                                    <span>作者：${item.name}</span>
                                    <span style="margin-left: 15px;">发布时间：${item.uploadTime}</span>
                                </div>
                            </div>
                        `);

                        // 卡片内容（文章正文）
                        var cardBody = $(`
                            <div class="layui-card-body">
                                ${item.data_html}
                                <div style="margin-top: 15px; color: #888; font-size: 12px;">
                                    <span>浏览数：${item.views}</span>
                                    <span style="margin-left: 15px;">收藏数：${item.favorites}</span>
                                    <span style="margin-left: 15px;">点赞数：${item.likes}</span>
                                </div>
                            </div>
                        `);

                        // 组合元素
                        card.append(cardHeader);
                        card.append(cardBody);
                        favoriteList.append(card);
                    });
                } else {
                    favoriteList.html('<div class="layui-empty">暂无收藏内容</div>');
                }
            },
            error: function () {
                $('#favorite-list').html('<div class="layui-empty">获取收藏数据失败</div>');
            }
        });
    });
</script>
</body>

</html>
