<script>
    $(document).ready(function () {
        $.ajax({
            url: '../../SelectMyFavoriteServlet',
            method: 'GET',
            dataType: 'json',
            success: function (response) {
                var favoriteList = $('#favorite-list');
                favoriteList.empty();
                
                if (response.length > 0) {
                    response.forEach(function (item) {
                        // 创建卡片容器
                        var card = $('<div class="layui-card" style="margin-bottom: 20px;"></div>');
                        
                        // 卡片头部（标题和作者信息）
                        var cardHeader = $(`
                            <div class="layui-card-header">
                                <h2 style="font-size: 20px; margin-bottom: 5px;">${item.topic}</h2>
                                <div style="color: #666; font-size: 12px;">
                                    <span>作者：${item.name}</span>
                                    <span style="margin-left: 15px;">发布时间：${item.uploadTime}</span>
                                </div>
                            </div>
                        `);

                        // 卡片内容（文章正文）
                        var cardBody = $(`
                            <div class="layui-card-body">
                                ${item.data_html}
                                <div style="margin-top: 15px; color: #888; font-size: 12px;">
                                    <span>浏览数：${item.views}</span>
                                    <span style="margin-left: 15px;">收藏数：${item.favorites}</span>
                                    <span style="margin-left: 15px;">点赞数：${item.likes}</span>
                                </div>
                            </div>
                        `);

                        // 组合元素
                        card.append(cardHeader);
                        card.append(cardBody);
                        favoriteList.append(card);
                    });
                } else {
                    favoriteList.html('<div class="layui-empty">暂无收藏内容</div>');
                }
            },
            error: function () {
                $('#favorite-list').html('<div class="layui-empty">获取收藏数据失败</div>');
            }
        });
    });
</script>