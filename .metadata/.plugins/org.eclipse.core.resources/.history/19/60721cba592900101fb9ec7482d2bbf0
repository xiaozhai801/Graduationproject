<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>我的收藏</title>
    <link href="../../layui/css/layui.css" rel="stylesheet">
    <script src="../../layui/layui.js"></script>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <style>
       .layui-nav.layui-nav-tree {
            position: fixed;
            left: 0;
            top: 0;
            width: 200px;
            overflow-y: auto;
        }

       .layui-form {
            margin-left: 220px;
            padding: 20px;
        }

        #favorite-list {
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <ul class="layui-nav layui-nav-tree">
        <li class="layui-nav-item"><a href="PersonalInfo.html">个人信息</a></li>
        <li class="layui-nav-item"><a href="EditPassword.html">修改密码</a></li>
        <li class="layui-nav-item"><a href="MyFavorite.html">我的收藏</a></li>
    </ul>
    <div id="favorite-list" class="layui-form"></div>

    <script>
        $(document).ready(function () {
            $.ajax({
                url: '../../SelectMyFavoriteServlet', // 替换为实际的后端 API 地址
                method: 'GET',
                dataType: 'json',
                success: function (res) {
                    console.log(res);
                    var favoriteList = $('#favorite-list');
                    favoriteList.empty();
                    if (res) {
                        var listItem = $('<div class="layui-form-item"></div>');
                        listItem.append('<h2>' + res.name + '</h2>');
                        listItem.append('<p>标题：' + res.topic + '</p>');
                        listItem.append('<p>作者：' + res.userId + '</p>');
                        listItem.append('<p>发布时间：' + res.uploadTime + '</p>');
                        listItem.append('<p>浏览量：' + res.views + '</p>');
                        listItem.append('<p>点赞数：' + res.likes + '</p>');
                        listItem.append('<p>收藏数：' + res.favorites + '</p>');
                        listItem.append('<p>类型：' + res.model + '</p>');
                        listItem.append('<h3>正文（文本版）</h3><pre>' + res.data_text + '</pre>');
                        listItem.append('<h3>正文（HTML 版）</h3><div>' + res.data_html + '</div>');
                        favoriteList.append(listItem);
                    } else {
                        favoriteList.text('暂无收藏');
                    }
                },
                error: function () {
                    $('#favorite-list').text('获取收藏数据失败');
                }
            });
        });
    </script>
</body>

</html>